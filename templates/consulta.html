<!-- ... cabeçalho ... -->
<form method="post" action="{{ url_for('chat', protocolo=denuncia.protocolo) }}" class="chat-form" autocomplete="off" enctype="multipart/form-data" id="chatForm">
    <input type="hidden" name="protocolo" value="{{ denuncia.protocolo }}">
    <input type="text" name="mensagem" placeholder="Digite sua mensagem..." maxlength="500" autocomplete="off" style="margin-bottom: 8px;">
    <div style="display: flex; gap: 12px; margin-bottom: 8px;">
        <div class="input-file-wrap">
            <label for="file-upload-user" class="label-file btn-azul">Anexar Documento</label>
            <input type="file" id="file-upload-user" name="anexo" class="input-file"
                accept="image/*,audio/*,video/*,.pdf,.doc,.docx,.xls,.xlsx,.png,.jpg,.jpeg"
                onchange="showFilenameUser()">
            <div class="filename" id="filename-user"></div>
        </div>
        <button type="button" class="btn-azul" onclick="abrirGravadorAudio()">Gravar Áudio</button>
    </div>
    <button type="submit" class="btn-verde">Enviar</button>
</form>
<!-- ... rodapé ... -->
<script>
    function showFilenameUser() {
        const input = document.getElementById('file-upload-user');
        const label = document.getElementById('filename-user');
        label.textContent = input.files.length ? input.files[0].name : '';
    }
    function abrirGravadorAudio() {
        alert("Funcionalidade de gravação de áudio aqui!");
    }
</script>
